<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Vocabulary Table (Full Row Readout)</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: sans-serif;
            margin: 20px;
            background-color: #f4f4f9;
        }
        h1 {
            color: #333;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            background-color: white;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px 15px;
            text-align: left;
        }
        th {
            background-color: #007bff;
            color: white;
            font-weight: bold;
        }
        tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        .read-row-icon {
            cursor: pointer;
            color: #28a745; /* Green for the main action */
            margin-left: 5px;
            font-size: 1.2em;
            transition: color 0.2s;
        }
        .read-row-icon:hover {
            color: #1e7e34;
        }
        .word-text {
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>Vocabulary List (Click Icon to Read Row)</h1>
    
    <table>
        <thead>
            <tr>
                <th>English Word</th>
                <th>Part of Speech</th>
                <th>Chinese Translation</th>
                <th>Pinyin</th>
                <th>Explanation</th>
            </tr>
        </thead>
        <tbody>

            <tr id="row-0">
                <td>
                    <span id="eng-0" class="word-text">Boisterous</span>
                    <i class="fas fa-volume-up read-row-icon" 
                       onclick="speakRow('eng-0', 'zh-0', 'nuance-0')"
                       title="Click to read the whole row"></i>
                </td>
                <td>Adjective</td>
                <td>
                    <span id="zh-0">喧闹的 / 活泼的</span>
                    <br><small>(xuānnào de / huópō de)</small>
                </td>
                <td>xuānnào de / huópō de</td>
                <td><span id="nuance-0">Emphasizes noisy and lively energy. 喧闹的 is often used for loud activity.</span></td>
            </tr>

            <tr id="row-1">
                <td>
                    <span id="eng-1" class="word-text">Gravitas</span>
                    <i class="fas fa-volume-up read-row-icon" 
                       onclick="speakRow('eng-1', 'zh-1', 'nuance-1')"
                       title="Click to read the whole row"></i>
                </td>
                <td>Noun</td>
                <td>
                    <span id="zh-1">庄严 / 庄重感</span>
                    <br><small>(zhuāngyán / zhuāngzhòng gǎn)</small>
                </td>
                <td>zhuāngyán / zhuāngzhòng gǎn</td>
                <td><span id="nuance-1">Refers to serious, dignified importance or weightiness.</span></td>
            </tr>

            <tr id="row-2">
                <td>
                    <span id="eng-2" class="word-text">Mired</span>
                    <i class="fas fa-volume-up read-row-icon" 
                       onclick="speakRow('eng-2', 'zh-2', 'nuance-2')"
                       title="Click to read the whole row"></i>
                </td>
                <td>Adjective</td>
                <td>
                    <span id="zh-2">陷入困境的 / 泥泞的</span>
                    <br><small>(xiànrù kùnjìng de / níníng de)</small>
                </td>
                <td>xiànrù kùnjìng de / níníng de</td>
                <td><span id="nuance-2">Literally means stuck in mud (泥泞的), but often used figuratively as stuck in a difficult situation (陷入困境的).</span></td>
            </tr>

            <tr id="row-3">
                <td>
                    <span id="eng-3" class="word-text">Pall</span>
                    <i class="fas fa-volume-up read-row-icon" 
                       onclick="speakRow('eng-3', 'zh-3', 'nuance-3')"
                       title="Click to read the whole row"></i>
                </td>
                <td>Noun</td>
                <td>
                    <span id="zh-3">笼罩的阴影 / 阴郁气氛</span>
                    <br><small>(lǒngzhào de yīnyǐng / yīnyù qìfēn)</small>
                </td>
                <td>lǒngzhào de yīnyǐng / yīnyù qìfēn</td>
                <td><span id="nuance-3">The feeling of gloom, sadness, or darkness covering a place or event.</span></td>
            </tr>

            <tr id="row-4">
                <td>
                    <span id="eng-4" class="word-text">Perfunctory</span>
                    <i class="fas fa-volume-up read-row-icon" 
                       onclick="speakRow('eng-4', 'zh-4', 'nuance-4')"
                       title="Click to read the whole row"></i>
                </td>
                <td>Adjective</td>
                <td>
                    <span id="zh-4">敷衍的 / 草率的</span>
                    <br><small>(fūyǎn de / cǎoshuài de)</small>
                </td>
                <td>fūyǎn de / cǎoshuài de</td>
                <td><span id="nuance-4">Doing something carelessly or out of duty, without real effort or interest.</span></td>
            </tr>

            <tr id="row-5">
                <td>
                    <span id="eng-5" class="word-text">Eloquent</span>
                    <i class="fas fa-volume-up read-row-icon" 
                       onclick="speakRow('eng-5', 'zh-5', 'nuance-5')"
                       title="Click to read the whole row"></i>
                </td>
                <td>Adjective</td>
                <td>
                    <span id="zh-5">雄辩的 / 意味深长的</span>
                    <br><small>(xióngbiàn de / yìwèi shēncháng de)</small>
                </td>
                <td>xióngbiàn de / yìwèi shēncháng de</td>
                <td><span id="nuance-5">Can mean persuasive (雄辩的), but in the story, it means deeply expressive or meaningful (意味深长的).</span></td>
            </tr>

            <tr id="row-6">
                <td>
                    <span id="eng-6" class="word-text">Monumental</span>
                    <i class="fas fa-volume-up read-row-icon" 
                       onclick="speakRow('eng-6', 'zh-6', 'nuance-6')"
                       title="Click to read the whole row"></i>
                </td>
                <td>Adjective</td>
                <td>
                    <span id="zh-6">巨大的 / 意义重大的</span>
                    <br><small>(jùdà de / yìyì zhòngdà de)</small>
                </td>
                <td>jùdà de / yìyì zhòngdà de</td>
                <td><span id="nuance-6">Refers to something massive in size (巨大的) or extremely important (意义重大的).</span></td>
            </tr>

            <tr id="row-7">
                <td>
                    <span id="eng-7" class="word-text">Recast</span>
                    <i class="fas fa-volume-up read-row-icon" 
                       onclick="speakRow('eng-7', 'zh-7', 'nuance-7')"
                       title="Click to read the whole row"></i>
                </td>
                <td>Verb</td>
                <td>
                    <span id="zh-7">重塑 / 重新表达</span>
                    <br><small>(chóngsù / chóngxīn biǎodá)</small>
                </td>
                <td>chóngsù / chóngxīn biǎodá</td>
                <td><span id="nuance-7">To change the form, structure, or presentation of something.</span></td>
            </tr>

        </tbody>
    </table>

    <script>
        // Check for Web Speech API support
        if (!('speechSynthesis' in window)) {
            alert('Your browser does not support Web Speech API. Audio functionality will not work.');
        }

        const synth = window.speechSynthesis;
        let speechQueue = [];
        let isSpeaking = false;

        // Function to add an utterance to the queue and manage playback
        function speakInQueue(text, lang, rate) {
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = lang; 
            utterance.rate = rate;
            
            utterance.onend = () => {
                // When one utterance finishes, start the next one in the queue
                speechQueue.shift();
                if (speechQueue.length > 0) {
                    synth.speak(speechQueue[0]);
                } else {
                    isSpeaking = false;
                }
            };
            
            speechQueue.push(utterance);
            
            // If the queue was empty, start speaking the first item
            if (speechQueue.length === 1 && !isSpeaking) {
                isSpeaking = true;
                synth.speak(speechQueue[0]);
            }
        }

        // Main function to read the entire row content
        function speakRow(engId, zhId, nuanceId) {
            // Cancel any current speaking session
            if (synth.speaking) {
                synth.cancel();
            }
            speechQueue = [];
            isSpeaking = false;

            const engText = document.getElementById(engId).textContent.trim();
            const zhTextFull = document.getElementById(zhId).textContent.trim();
            const nuanceText = document.getElementById(nuanceId).textContent.trim();
            
            // 1. English Word
            speakInQueue(engText, 'en-US', 1.0);
            
            // 2. Chinese Translation (Strip non-Chinese characters for better pronunciation)
            const zhTextOnly = zhTextFull.replace(/[^一-鿿]/g, '');
            if (zhTextOnly) {
                // Add a small pause utterance (silence) before the Chinese
                speakInQueue(" ... ", 'en-US', 1.0); // A small English "breath"
                speakInQueue(zhTextOnly, 'zh-CN', 0.85); 
            }

            // 3. Explanation
            if (nuanceText) {
                // Add a small pause utterance (silence) before the explanation
                speakInQueue(". ", 'en-US', 1.0); // A small English "breath"
                speakInQueue(nuanceText, 'en-US', 0.95); // Slightly slower rate for explanation
            }
        }
    </script>
</body>
</html>
